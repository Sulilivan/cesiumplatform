# 智慧水利监测平台 - 测试用例文档

**项目名称**：智慧水利监测平台  
**版本**：V1.0  
**测试日期**：2026年1月14日  
**编写人**：开发团队  

---

## 一、测试概述

### 1.1 测试目的
验证智慧水利监测平台各功能模块的正确性、稳定性和可用性，确保系统满足设计要求。

### 1.2 测试范围
- 用户认证模块
- 测点管理模块
- 监测数据模块
- 三维可视化模块
- 管理后台模块

### 1.3 测试环境

| 项目 | 配置 |
|------|------|
| 操作系统 | Windows 11 |
| 浏览器 | Chrome 120+ / Edge 120+ |
| 后端 | Python 3.11 + FastAPI |
| 前端 | Node.js 22 + Vue 3 |
| 数据库 | SQLite |

---

## 二、功能测试用例

### 2.1 用户认证模块

| 用例编号 | TC-AUTH-001 |
|----------|-------------|
| **用例名称** | 管理员登录成功 |
| **前置条件** | 系统已启动，数据库存在admin用户 |
| **测试步骤** | 1. 打开登录页面 http://localhost:3000<br>2. 输入用户名：admin<br>3. 输入密码：admin123<br>4. 点击"登录"按钮 |
| **预期结果** | 登录成功，跳转到主界面，显示三维场景 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-AUTH-002 |
|----------|-------------|
| **用例名称** | 密码错误登录失败 |
| **前置条件** | 系统已启动 |
| **测试步骤** | 1. 打开登录页面<br>2. 输入用户名：admin<br>3. 输入错误密码：wrongpassword<br>4. 点击"登录"按钮 |
| **预期结果** | 登录失败，显示"用户名或密码错误"提示 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-AUTH-003 |
|----------|-------------|
| **用例名称** | 用户名为空登录 |
| **前置条件** | 系统已启动 |
| **测试步骤** | 1. 打开登录页面<br>2. 用户名留空<br>3. 输入密码：admin123<br>4. 点击"登录"按钮 |
| **预期结果** | 登录按钮禁用或显示"请输入用户名"提示 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-AUTH-004 |
|----------|-------------|
| **用例名称** | 未登录访问受保护页面 |
| **前置条件** | 用户未登录 |
| **测试步骤** | 1. 清除浏览器缓存和localStorage<br>2. 直接访问 http://localhost:3000/admin |
| **预期结果** | 自动跳转到登录页面 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-AUTH-005 |
|----------|-------------|
| **用例名称** | 退出登录 |
| **前置条件** | 用户已登录 |
| **测试步骤** | 1. 点击页面右上角用户头像/退出按钮<br>2. 确认退出 |
| **预期结果** | 退出登录，跳转到登录页面，token被清除 |
| **测试结果** | ☐ 通过 ☐ 失败 |

---

### 2.2 测点管理模块

| 用例编号 | TC-POINT-001 |
|----------|--------------|
| **用例名称** | 获取所有测点列表 |
| **前置条件** | 用户已登录，数据库存在测点数据 |
| **测试步骤** | 1. 进入主界面<br>2. 查看左侧测点列表 |
| **预期结果** | 显示所有测点，包含测点名称、类型、状态 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-POINT-002 |
|----------|--------------|
| **用例名称** | 按设备类型筛选测点 |
| **前置条件** | 用户已登录 |
| **测试步骤** | 1. 在测点列表选择筛选条件"倒垂线"<br>2. 查看筛选结果 |
| **预期结果** | 仅显示设备类型为"倒垂线"的测点 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-POINT-003 |
|----------|--------------|
| **用例名称** | 查看测点详情 |
| **前置条件** | 用户已登录，存在测点IP1 |
| **测试步骤** | 1. 在测点列表点击测点"IP1"<br>2. 查看右侧详情面板 |
| **预期结果** | 显示测点详细信息：编号、名称、经纬度、最新数据、历史曲线图 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-POINT-004 |
|----------|--------------|
| **用例名称** | 新增测点（管理员） |
| **前置条件** | 管理员已登录，进入管理后台 |
| **测试步骤** | 1. 进入"测点管理"页面<br>2. 点击"新增测点"<br>3. 填写：编号TEST01、名称测试点1、类型倒垂线、经度113.5、纬度23.1、高程100<br>4. 点击"保存" |
| **预期结果** | 测点创建成功，列表中出现新测点 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-POINT-005 |
|----------|--------------|
| **用例名称** | 编辑测点信息 |
| **前置条件** | 管理员已登录，存在测点 |
| **测试步骤** | 1. 进入"测点管理"页面<br>2. 点击测点的"编辑"按钮<br>3. 修改测点名称为"修改后的名称"<br>4. 点击"保存" |
| **预期结果** | 测点信息更新成功，显示新名称 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-POINT-006 |
|----------|--------------|
| **用例名称** | 删除测点 |
| **前置条件** | 管理员已登录，存在测试测点 |
| **测试步骤** | 1. 进入"测点管理"页面<br>2. 点击测点的"删除"按钮<br>3. 确认删除 |
| **预期结果** | 测点删除成功，从列表中消失 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-POINT-007 |
|----------|--------------|
| **用例名称** | 绑定测点到3D模型构件 |
| **前置条件** | 管理员已登录，存在测点和3D模型 |
| **测试步骤** | 1. 进入"测点管理"页面<br>2. 编辑测点<br>3. 在"绑定模型构件"字段输入构件ID<br>4. 保存 |
| **预期结果** | 绑定成功，在3D场景中点击该构件可显示测点信息 |
| **测试结果** | ☐ 通过 ☐ 失败 |

---

### 2.3 监测数据模块

| 用例编号 | TC-DATA-001 |
|----------|-------------|
| **用例名称** | 获取测点历史数据 |
| **前置条件** | 用户已登录，测点IP1存在历史数据 |
| **测试步骤** | 1. 点击测点IP1<br>2. 查看右侧历史数据图表 |
| **预期结果** | 显示ECharts折线图，展示历史监测值随时间的变化 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-DATA-002 |
|----------|-------------|
| **用例名称** | 获取最新监测数据 |
| **前置条件** | 用户已登录 |
| **测试步骤** | 1. 进入主界面<br>2. 查看测点列表中的最新值 |
| **预期结果** | 每个测点显示最新监测值和时间 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-DATA-003 |
|----------|-------------|
| **用例名称** | 按时间范围查询数据 |
| **前置条件** | 管理员已登录，进入数据中心 |
| **测试步骤** | 1. 进入"数据中心"页面<br>2. 选择开始时间：2024-01-01<br>3. 选择结束时间：2024-12-31<br>4. 点击"查询" |
| **预期结果** | 仅显示该时间范围内的监测数据 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-DATA-004 |
|----------|-------------|
| **用例名称** | 按设备类型查询数据 |
| **前置条件** | 管理员已登录，进入数据中心 |
| **测试步骤** | 1. 进入"数据中心"页面<br>2. 选择设备类型：倒垂线<br>3. 点击"查询" |
| **预期结果** | 仅显示倒垂线类型的监测数据 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-DATA-005 |
|----------|-------------|
| **用例名称** | 新增监测数据（管理员） |
| **前置条件** | 管理员已登录，进入数据中心 |
| **测试步骤** | 1. 点击"新增数据"<br>2. 选择测点：IP1<br>3. 输入监测值：12.5<br>4. 选择时间：当前时间<br>5. 点击"保存" |
| **预期结果** | 数据添加成功，列表中出现新数据 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-DATA-006 |
|----------|-------------|
| **用例名称** | 编辑监测数据 |
| **前置条件** | 管理员已登录，存在监测数据 |
| **测试步骤** | 1. 在数据中心找到一条数据<br>2. 点击"编辑"<br>3. 修改监测值为15.0<br>4. 点击"保存" |
| **预期结果** | 数据更新成功 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-DATA-007 |
|----------|-------------|
| **用例名称** | 删除监测数据 |
| **前置条件** | 管理员已登录，存在监测数据 |
| **测试步骤** | 1. 在数据中心找到一条数据<br>2. 点击"删除"<br>3. 确认删除 |
| **预期结果** | 数据删除成功，从列表中消失 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-DATA-008 |
|----------|-------------|
| **用例名称** | 数据分页显示 |
| **前置条件** | 存在超过50条监测数据 |
| **测试步骤** | 1. 进入数据中心<br>2. 查看分页控件<br>3. 点击"下一页" |
| **预期结果** | 正确显示分页，每页50条，翻页正常 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-DATA-009 |
|----------|-------------|
| **用例名称** | 切换表格/图表视图 |
| **前置条件** | 管理员已登录，进入数据中心 |
| **测试步骤** | 1. 默认显示表格视图<br>2. 点击"图表视图"按钮 |
| **预期结果** | 切换为ECharts图表展示，显示数据趋势 |
| **测试结果** | ☐ 通过 ☐ 失败 |

---

### 2.4 三维可视化模块

| 用例编号 | TC-3D-001 |
|----------|-----------|
| **用例名称** | 加载3D模型 |
| **前置条件** | 用户已登录，3D Tiles模型文件存在 |
| **测试步骤** | 1. 进入主界面<br>2. 等待场景加载 |
| **预期结果** | Cesium场景正常加载，显示重力坝3D模型 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-3D-002 |
|----------|-----------|
| **用例名称** | 测点标注显示 |
| **前置条件** | 场景已加载，存在测点 |
| **测试步骤** | 1. 观察3D场景中的测点标注 |
| **预期结果** | 测点以图标形式标注在正确位置，鼠标悬停显示测点名称 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-3D-003 |
|----------|-----------|
| **用例名称** | 点击测点定位 |
| **前置条件** | 场景已加载 |
| **测试步骤** | 1. 在测点列表中点击一个测点 |
| **预期结果** | 镜头飞行至该测点位置，测点高亮显示 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-3D-004 |
|----------|-----------|
| **用例名称** | 鼠标坐标显示 |
| **前置条件** | 场景已加载 |
| **测试步骤** | 1. 在3D场景中移动鼠标 |
| **预期结果** | 底部状态栏实时显示鼠标位置的经度、纬度、高程 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-3D-005 |
|----------|-----------|
| **用例名称** | 场景设置-天空盒切换 |
| **前置条件** | 场景已加载 |
| **测试步骤** | 1. 点击"场景设置"<br>2. 切换天空盒开关 |
| **预期结果** | 天空盒显示/隐藏切换正常 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-3D-006 |
|----------|-----------|
| **用例名称** | 点击模型构件高亮 |
| **前置条件** | 场景已加载，构件已绑定测点 |
| **测试步骤** | 1. 在3D场景中点击已绑定测点的模型构件 |
| **预期结果** | 构件高亮显示，右侧显示关联测点信息 |
| **测试结果** | ☐ 通过 ☐ 失败 |

---

### 2.5 用户管理模块（管理后台）

| 用例编号 | TC-USER-001 |
|----------|-------------|
| **用例名称** | 获取用户列表 |
| **前置条件** | 管理员已登录 |
| **测试步骤** | 1. 进入管理后台<br>2. 点击"用户管理" |
| **预期结果** | 显示所有用户列表，包含用户名、邮箱、角色、状态 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-USER-002 |
|----------|-------------|
| **用例名称** | 新增普通用户 |
| **前置条件** | 管理员已登录 |
| **测试步骤** | 1. 点击"新增用户"<br>2. 填写用户名：testuser<br>3. 填写邮箱：test@example.com<br>4. 填写密码：test123456<br>5. 选择角色：普通用户<br>6. 点击"保存" |
| **预期结果** | 用户创建成功，可使用新账号登录 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-USER-003 |
|----------|-------------|
| **用例名称** | 编辑用户角色 |
| **前置条件** | 管理员已登录，存在普通用户 |
| **测试步骤** | 1. 找到普通用户<br>2. 点击"编辑"<br>3. 将角色改为"管理员"<br>4. 点击"保存" |
| **预期结果** | 用户角色更新成功 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-USER-004 |
|----------|-------------|
| **用例名称** | 删除用户 |
| **前置条件** | 管理员已登录，存在测试用户 |
| **测试步骤** | 1. 找到测试用户<br>2. 点击"删除"<br>3. 确认删除 |
| **预期结果** | 用户删除成功，无法再登录 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-USER-005 |
|----------|-------------|
| **用例名称** | 普通用户无法访问管理功能 |
| **前置条件** | 以普通用户身份登录 |
| **测试步骤** | 1. 尝试访问管理后台<br>2. 尝试新增/编辑/删除测点或数据 |
| **预期结果** | 显示权限不足提示，操作被拒绝 |
| **测试结果** | ☐ 通过 ☐ 失败 |

---

## 三、API接口测试用例

### 3.1 认证接口

| 用例编号 | API-AUTH-001 |
|----------|--------------|
| **接口** | POST /auth/login |
| **描述** | 用户登录获取Token |
| **请求体** | `{"username": "admin", "password": "admin123"}` |
| **预期响应** | 200 OK，返回 `{"access_token": "xxx", "token_type": "bearer"}` |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | API-AUTH-002 |
|----------|--------------|
| **接口** | POST /auth/login |
| **描述** | 错误密码登录 |
| **请求体** | `{"username": "admin", "password": "wrong"}` |
| **预期响应** | 401 Unauthorized，返回错误信息 |
| **测试结果** | ☐ 通过 ☐ 失败 |

### 3.2 测点接口

| 用例编号 | API-POINT-001 |
|----------|---------------|
| **接口** | GET /points/ |
| **描述** | 获取所有测点 |
| **请求头** | Authorization: Bearer {token} |
| **预期响应** | 200 OK，返回测点数组 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | API-POINT-002 |
|----------|---------------|
| **接口** | GET /points/{point_code} |
| **描述** | 获取测点详情 |
| **请求参数** | point_code=IP1 |
| **预期响应** | 200 OK，返回测点详细信息 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | API-POINT-003 |
|----------|---------------|
| **接口** | GET /points/{point_code} |
| **描述** | 获取不存在的测点 |
| **请求参数** | point_code=NOTEXIST |
| **预期响应** | 404 Not Found，返回"测点不存在" |
| **测试结果** | ☐ 通过 ☐ 失败 |

### 3.3 监测数据接口

| 用例编号 | API-DATA-001 |
|----------|--------------|
| **接口** | GET /measurements/{point_code} |
| **描述** | 获取测点历史数据 |
| **请求参数** | point_code=IP1 |
| **预期响应** | 200 OK，返回监测数据数组 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | API-DATA-002 |
|----------|--------------|
| **接口** | GET /measurements/latest |
| **描述** | 获取所有测点最新数据 |
| **预期响应** | 200 OK，返回各测点最新数据 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | API-DATA-003 |
|----------|--------------|
| **接口** | GET /measurements/search |
| **描述** | 搜索监测数据 |
| **请求参数** | start_time=2024-01-01&device_type=倒垂线 |
| **预期响应** | 200 OK，返回符合条件的数据 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | API-DATA-004 |
|----------|--------------|
| **接口** | POST /measurements/ |
| **描述** | 新增监测数据 |
| **请求体** | `{"point_code": "IP1", "value": 12.5, "measurement_type": "位移"}` |
| **预期响应** | 200 OK，返回创建的数据 |
| **测试结果** | ☐ 通过 ☐ 失败 |

### 3.4 专业数据接口

| 用例编号 | API-PLUMB-001 |
|----------|---------------|
| **接口** | GET /inverted-plumb/{point_code} |
| **描述** | 获取倒垂线数据 |
| **请求参数** | point_code=IP1 |
| **预期响应** | 200 OK，返回倒垂线历史数据 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | API-LEVEL-001 |
|----------|---------------|
| **接口** | GET /static-level/{point_code} |
| **描述** | 获取静力水准数据 |
| **请求参数** | point_code=SL1 |
| **预期响应** | 200 OK，返回静力水准历史数据 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | API-TENSION-001 |
|----------|-----------------|
| **接口** | GET /tension-line/{point_code} |
| **描述** | 获取引张线数据 |
| **请求参数** | point_code=TL1 |
| **预期响应** | 200 OK，返回引张线历史数据 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | API-WATER-001 |
|----------|---------------|
| **接口** | GET /water-level/{point_code} |
| **描述** | 获取水位数据 |
| **请求参数** | point_code=WL1 |
| **预期响应** | 200 OK，返回水位历史数据 |
| **测试结果** | ☐ 通过 ☐ 失败 |

---

## 四、兼容性测试

| 用例编号 | TC-COMPAT-001 |
|----------|---------------|
| **测试项** | Chrome 浏览器兼容性 |
| **测试环境** | Chrome 120+ |
| **测试内容** | 所有页面正常显示，3D场景正常加载，功能正常 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-COMPAT-002 |
|----------|---------------|
| **测试项** | Edge 浏览器兼容性 |
| **测试环境** | Edge 120+ |
| **测试内容** | 所有页面正常显示，3D场景正常加载，功能正常 |
| **测试结果** | ☐ 通过 ☐ 失败 |

| 用例编号 | TC-COMPAT-003 |
|----------|---------------|
| **测试项** | 屏幕分辨率适配 |
| **测试环境** | 1920×1080 / 1366×768 |
| **测试内容** | 页面布局正常，无元素重叠或溢出 |
| **测试结果** | ☐ 通过 ☐ 失败 |

---

## 五、测试结果汇总

| 模块 | 用例总数 | 通过 | 失败 | 通过率 |
|------|----------|------|------|--------|
| 用户认证 | 5 | | | |
| 测点管理 | 7 | | | |
| 监测数据 | 9 | | | |
| 三维可视化 | 6 | | | |
| 用户管理 | 5 | | | |
| API接口 | 12 | | | |
| 兼容性 | 3 | | | |
| **合计** | **47** | | | |

---

## 六、测试结论

根据测试结果，智慧水利监测平台：

- [ ] 所有功能测试通过，系统可正常使用
- [ ] 存在部分缺陷，需修复后复测
- [ ] 存在严重缺陷，不建议上线

**测试人员签名**：________________  
**测试日期**：2026年1月14日
